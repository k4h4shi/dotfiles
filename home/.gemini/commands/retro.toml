description = "軽量セッション振り返り: 要点抽出→改善峻別→アクション化。Usage: /retro [SESSION_ID]"
prompt = """
# 軽量レトロスペクティブ

セッションログを読み、**要点のみ**を抽出して改善提案する。

## 入力

- `{{args}}`: セッションID（省略時は最新セッションを探す）
- セッションファイル: `~/.claude/projects/*/<SESSION_ID>.jsonl`

## 手順

### 1. セッション特定

```bash
if [ -z "{{args}}" ]; then
  SESSION_FILE=$(ls -t ~/.claude/projects/**/*.jsonl 2>/dev/null | head -1)
else
  SESSION_FILE=$(find ~/.claude/projects -name "{{args}}.jsonl" 2>/dev/null | head -1)
fi
cat "$SESSION_FILE"
```

### 2. 要点抽出（3分で完了）

以下の観点で**重要度の高いもののみ**抽出:

| 観点 | 抽出基準 |
|:-----|:---------|
| Pain Points | 2回以上発生 or 5分以上のブロック |
| Permissions | 許可待ちが3回以上 |
| 繰り返しパターン | 同一操作が3回以上 |

**抽出しない**: 1回限りの事象、軽微な問題

### 3. 改善峻別（1〜3件に絞る）

**採用基準**:
- 仕組みで潰せる（人の注意ではない）
- 複数セッションで再発の可能性
- repo内に落とせる

**見送り**: 1回限り、原因不明、個人設定に閉じる

### 4. 出力（簡潔に）

```markdown
# Retro: <SESSION_ID>

## Summary
[1-2文でセッション概要]

## Pain Points
- [重要なもののみ、最大3件]

## Improvements（実施するもの）
1. **[改善名]**: [1文で内容] → [設定ファイル名]

## Action
- [ ] [具体的アクション]
```

## 注意

- 分析は3分以内に完了
- 改善提案は1〜3件に絞る
- 設定ファイルの直接編集は行わない
"""
